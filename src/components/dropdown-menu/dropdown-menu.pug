include ../button/button

mixin dropdown-menu(options)
  -
    const {
      items = [
        {name:'', counter: 0}, 
      ],
      isOpened = false,
      variants = [['']],
      hasButtons = false,
      placeholder = '',
      groups = [[0,1,2]]
    } = options || {}

    const variantsString = variants.join('-')
    const groupsString = groups.join('-')

    const {buttons} = require('@components/dropdown-menu/data.json')

    const openedClass = isOpened && 'dropdown-menu_opened'
    const classes = [openedClass]

  .dropdown-menu.js-dropdown-menu(
    class=classes,
    data-has-buttons=hasButtons,
    data-placeholder=placeholder,
    data-variants=variantsString,
    data-groups=groupsString
  )
    .dropdown-menu__input.js-dropdown-menu__input
      block
    .dropdown-menu__menu.js-dropdown-menu__menu
      ul.dropdown-menu__list
        each item in items 
          li.dropdown-menu__item.js-dropdown-menu__item
            span.dropdown-menu__item-name= item.name
            button.dropdown-menu__counter-button.js-dropdown-menu__counter-button(
              type="button"
            ) -
            span.dropdown-menu__counter.js-dropdown-menu__counter= item.counter
            button.dropdown-menu__counter-button.js-dropdown-menu__counter-button(
              type="button"
            ) +
      if hasButtons
        .dropdown-menu__buttons
          .dropdown-menu__clear-button.js-dropdown-menu__clear-button
            +button(Object.assign({theme: 'link', type: 'button'}, buttons.clear))
          .dropdown-menu__apply-button.js-dropdown-menu__apply-button
            +button(Object.assign({theme: 'link', type: 'button'}, buttons.apply))
